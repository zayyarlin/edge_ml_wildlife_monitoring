<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Global Wildlife Listening Project</title>

    
    <style>
      
    </style>
  </head>
  <body>
    <div id="detections">
      
    </div>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-firestore.js"></script>

    <script
			  src="https://code.jquery.com/jquery-3.5.1.min.js"
			  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
			  crossorigin="anonymous"></script>

    <script>
      
      function displayDetection(animal, timestamp) {
        return `<div> ${animal} ${timestamp} </div>`;
      }
      
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyD0RIl0Zkipziz9kAOX7JwTMV3WV_6TxCw",
        authDomain: "global-wildlife-listening.firebaseapp.com",
        projectId: "global-wildlife-listening",
        storageBucket: "global-wildlife-listening.appspot.com",
        messagingSenderId: "1000440276061",
        appId: "1:1000440276061:web:5459a0d559d245723cd9b4"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      var db = firebase.firestore();
      db.collection("detections").onSnapshot((changeDoc) => {
        console.log("change detected")
        var li = "";
        for (doc of changeDoc.docs) {
          li += displayDetection(doc.data().type, doc.data().detection_time)
        }
        $( "#detections" ).html(li);
        console.log(changeDoc.docs);
      });



    </script>
  </body>
</html>

